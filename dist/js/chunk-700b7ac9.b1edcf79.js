(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-700b7ac9"],{"159b":function(t,e,s){var i=s("da84"),n=s("fdbc"),a=s("17c2"),o=s("9112");for(var l in n){var r=i[l],c=r&&r.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(f){c.forEach=a}}},"17c2":function(t,e,s){"use strict";var i=s("b727").forEach,n=s("a640"),a=s("ae40"),o=n("forEach"),l=a("forEach");t.exports=o&&l?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"333e":function(t,e,s){t.exports=s.p+"img/loading.f5acdf2c.svg"},4160:function(t,e,s){"use strict";var i=s("23e7"),n=s("17c2");i({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"6b6e":function(t,e,s){},"9de9":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade",mode:"out-in"}},[1==t.state.step?i("select-session",{on:{back:function(e){return t.$emit("back")},close:function(e){return t.$emit("close")},selected:t.getId}}):2==t.state.step?i("div",{staticClass:"importBuses",on:{drop:function(e){return e.preventDefault(),t.handleDropFile(e)},dragover:function(t){t.preventDefault()}}},[i("h5",{staticClass:"text-center text-strong pl-3 pr-4 py-3 justify-content-between d-flex align-items-center"},[i("p",{staticClass:"m-0"},[i("i",{staticClass:"fa fa-arrow-left mr-3 cursor-pointer",attrs:{disabled:!0},on:{click:function(e){t.state.step=1}}}),t._v("Import Busses ")]),i("i",{staticClass:"fa fa-times cursor-pointer",on:{click:function(e){return t.$emit("close")}}})]),i("div",{staticClass:"modal-block p-3 d-flex flex-column align-items-center"},[i("h6",{staticClass:"m-0"},[t._v("Drag Excel File over here")]),i("div",{staticClass:"drop-zone d-flex flex-column align-items-center m-2"},[i("img",{staticClass:"excel_logo",staticStyle:{height:"100px",width:"100px"},attrs:{src:s("e6fb")}})]),i("span",{staticClass:"my-2"},[t._v("or")]),i("input",{ref:"choosenFile",staticClass:"file-selector",attrs:{type:"file",id:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:t.handleChooseFile}}),i("label",{attrs:{for:"file"}},[t._v("select a file")]),i("ul",[i("transition",{attrs:{name:"fade",duration:500}},[t.file.size?i("li",[i("h6",{staticClass:"text-truncate flex-grow-1 font-13 my-3"},[t._v(t._s(t.file.name)+" ("+t._s(t._f("kb")(t.file.size))+" kb)")]),i("i",{staticClass:"fa fa-times cursor-pointer",on:{click:function(e){return t.removeFile(t.file)}}})]):t._e()])],1),i("button",{staticClass:"import-btn",attrs:{disabled:t.disableImport},on:{click:t.sendFile}},[i("i",{staticClass:"fa fa-upload mr-2"}),t._v("import ")])]),t.state.uploading?i("div",{staticClass:"uploading"},[i("img",{attrs:{src:s("333e")}}),i("label",{attrs:{for:"img"}},[t._v("uploading . . .")])]):t._e()]):t._e()],1)},n=[],a=(s("4160"),s("b0c0"),s("d3b7"),s("159b"),{components:{"select-session":function(){return s.e("chunk-cc18741c").then(s.bind(null,"98b6"))}},data:function(){return{file:{},session_id:null,validFileExtensions:[".xls",".xlsx"],state:{uploading:!1,step:1}}},computed:{disableImport:function(){return!Boolean(this.file.name)}},mounted:function(){this.reset()},methods:{getId:function(t){t?(this.reset(),this.state.step=2,this.session_id=t):this.reset()},sendFile:function(){var t=this;if(this.file.size>0){this.state.uploading=!0;var e=new FormData;e.append("import_buses_file",this.file),e.append("session_id",this.session_id),this.axios.post("/company/import/buses",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.state.uploading=!1,console.log(e.data),t.$emit("uploaded"),t.$modal.hide("addNew"),t.reset(),200===e.data.status&&t.$toast.success(": File uploaded successfully",e.data.message,{position:"topRight",progressBar:!1})})).catch((function(e){t.state.uploading=!1,console.log(e,e.response),t.$toast.error("".concat(e.response.data.message||e),"",{position:"topRight",progressBar:!1})}))}},handleDropFile:function(t){var e=t.dataTransfer.files;e&&(e.length>0&&this.isExcel(e[0])?this.file=e[0]:this.removeFile())},handleChooseFile:function(){var t=this.$refs.choosenFile.files;t&&(t.length>0&&this.isExcel(t[0])?this.file=t[0]:this.removeFile())},removeFile:function(t){this.file={},this.$refs.choosenFile.value=""},isExcel:function(t){if("application/vnd.ms-excel"===t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type)return!0;var e=t.name,s=0;return this.validFileExtensions.forEach((function(t){e.substr(e.length-t.length,t.length).toLowerCase()==t.toLowerCase()&&s++})),s>0||(this.$toast.error("Please upload Excel files only","unsupported File type",{position:"topCenter",progressBar:!1}),!1)},reset:function(){this.state.step=1,this.file={},this.state.uploading=!1,this.session_id=null}}}),o=a,l=(s("db70"),s("2877")),r=Object(l["a"])(o,i,n,!1,null,null,null);e["default"]=r.exports},db70:function(t,e,s){"use strict";var i=s("6b6e"),n=s.n(i);n.a},e6fb:function(t,e,s){t.exports=s.p+"img/excel.d0c0ee39.svg"},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);