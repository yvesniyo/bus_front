(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-700b7ac9"],{"159b":function(e,t,s){var i=s("da84"),n=s("fdbc"),o=s("17c2"),a=s("9112");for(var l in n){var r=i[l],c=r&&r.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(f){c.forEach=o}}},"17c2":function(e,t,s){"use strict";var i=s("b727").forEach,n=s("a640"),o=s("ae40"),a=n("forEach"),l=o("forEach");e.exports=a&&l?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"333e":function(e,t,s){e.exports=s.p+"img/loading.f5acdf2c.svg"},4160:function(e,t,s){"use strict";var i=s("23e7"),n=s("17c2");i({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"6b6e":function(e,t,s){},"9de9":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade",mode:"out-in"}},[1==e.state.step?i("select-session",{on:{back:function(t){return e.$emit("back")},close:function(t){return e.$emit("close")},selected:e.getId}}):2==e.state.step?i("div",{staticClass:"importBuses",on:{drop:function(t){return t.preventDefault(),e.handleDropFile(t)},dragover:function(e){e.preventDefault()}}},[i("h5",{staticClass:"text-center text-strong pl-3 pr-4 py-3 justify-content-between d-flex align-items-center"},[i("p",{staticClass:"m-0"},[i("i",{staticClass:"fa fa-arrow-left mr-3 cursor-pointer",attrs:{disabled:!0},on:{click:function(t){e.state.step=1}}}),e._v("Import Busses ")]),i("i",{staticClass:"fa fa-times cursor-pointer",on:{click:function(t){return e.$emit("close")}}})]),i("div",{staticClass:"modal-block p-3 d-flex flex-column align-items-center"},[i("h6",{staticClass:"m-0"},[e._v("Drag Excel File over here")]),i("div",{staticClass:"drop-zone d-flex flex-column align-items-center m-2"},[i("img",{staticClass:"excel_logo",staticStyle:{height:"100px",width:"100px"},attrs:{src:s("e6fb")}})]),i("span",{staticClass:"my-2"},[e._v("or")]),i("input",{ref:"choosenFile",staticClass:"file-selector",attrs:{type:"file",id:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:e.handleChooseFile}}),i("label",{attrs:{for:"file"}},[e._v("select a file")]),i("ul",[i("transition",{attrs:{name:"fade",duration:500}},[e.file.size?i("li",[i("h6",{staticClass:"text-truncate flex-grow-1 font-13 my-3"},[e._v(e._s(e.file.name)+" ("+e._s(e._f("kb")(e.file.size))+" kb)")]),i("i",{staticClass:"fa fa-times cursor-pointer",on:{click:function(t){return e.removeFile(e.file)}}})]):e._e()])],1),i("button",{staticClass:"import-btn",attrs:{disabled:e.disableImport},on:{click:e.sendFile}},[i("i",{staticClass:"fa fa-upload mr-2"}),e._v("import ")])]),e.state.uploading?i("div",{staticClass:"uploading"},[i("img",{attrs:{src:s("333e")}}),i("label",{attrs:{for:"img"}},[e._v("uploading . . .")])]):e._e()]):e._e()],1)},n=[],o=(s("4160"),s("b0c0"),s("d3b7"),s("159b"),{components:{"select-session":function(){return s.e("chunk-cc18741c").then(s.bind(null,"98b6"))}},data:function(){return{file:{},session_id:null,validFileExtensions:[".xls",".xlsx"],state:{uploading:!1,step:1}}},computed:{disableImport:function(){return!Boolean(this.file.name)}},mounted:function(){this.reset()},methods:{getId:function(e){e?(this.reset(),this.state.step=2,this.session_id=e):this.reset()},sendFile:function(){var e=this;if(console.log(this.file),this.file.size>0){this.state.uploading=!0;var t=new FormData;t.append("file",this.file),this.axios.post("/company/import/buses",{import_buses_file:t,session_id:this.session_id}).then((function(t){e.state.uploading=!1,console.log(t.data),e.$emit("uploaded"),e.$modal.hide("addNew"),e.reset()})).catch((function(t){e.state.uploading=!1,console.log(t,t.response),e.$toast.error("".concat(t.response.data.message||t),"",{position:"topRight",progressBar:!1})}))}},handleDropFile:function(e){var t=e.dataTransfer.files;t&&(t.length>0&&this.isExcel(t[0])?this.file=t[0]:this.removeFile())},handleChooseFile:function(){var e=this.$refs.choosenFile.files;e&&(e.length>0&&this.isExcel(e[0])?this.file=e[0]:this.removeFile())},removeFile:function(e){this.file={},this.$refs.choosenFile.value=""},isExcel:function(e){if(console.log(e),"application/vnd.ms-excel"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type)return!0;var t=e.name,s=0;return this.validFileExtensions.forEach((function(e){t.substr(t.length-e.length,e.length).toLowerCase()==e.toLowerCase()&&s++})),s>0||(this.$toast.error("Please upload Excel files only","unsupported File type",{position:"topCenter",progressBar:!1}),!1)},reset:function(){this.state.step=1,this.file={},this.state.uploading=!1,this.session_id=null}}}),a=o,l=(s("db70"),s("2877")),r=Object(l["a"])(a,i,n,!1,null,null,null);t["default"]=r.exports},db70:function(e,t,s){"use strict";var i=s("6b6e"),n=s.n(i);n.a},e6fb:function(e,t,s){e.exports=s.p+"img/excel.d0c0ee39.svg"},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);